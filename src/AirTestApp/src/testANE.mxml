<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160" applicationComplete="applicationCompleteHandler(event)"
               implements="com.deviceteam.kezdet.airhost.IPluginCallback">
  <fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
  </fx:Declarations>
  
  <fx:Script>

    <![CDATA[
      import com.deviceteam.kezdet.airhost.KezdetAIRHost;
      import com.deviceteam.kezdet.airhost.IPluginCallback;
      import mx.events.FlexEvent;
      
      private var _host : KezdetAIRHost;
      
      protected function applicationCompleteHandler(event:FlexEvent): void
      {
        _host = new KezdetAIRHost( "certificates/" + NAMES::CERTNAME, File.documentsDirectory.nativePath + "/jar" );
        
        var pluginId : int  = _host.load( "TestPlugin.jar", "com.deviceteam.kezdet.plugin.KezdetPlugin", this );
        var ret : String = _host.invoke( pluginId, "batteryLevel", null );
        trace(ret);
      }
      
      
      
      public function handleEvent( message : String, param : String ) : void
      {
        trace("message: " + message + ", parameter: " + param );
        battVal.text = "" + param;
      }
      
    ]]>
    
  </fx:Script>
  
  <s:VGroup x="0" y="0" width="100%" height="100%">
    <s:HGroup width="100%" height="100%">
      <s:Label text="Battery: "/>
      <s:TextArea id="battVal"/>
    </s:HGroup>
  </s:VGroup>
</s:Application>
