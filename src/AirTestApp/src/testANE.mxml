<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160" applicationComplete="applicationCompleteHandler(event)">
  <fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
  </fx:Declarations>
  
  <fx:Script>

    <![CDATA[
      import com.deviceteam.kezdet.airhost.KezdetAIRHost;
      import com.deviceteam.kezdet.airhost.KezdetEvent;
      import mx.events.FlexEvent;
      
      private var _host : KezdetAIRHost;
      
      protected function applicationCompleteHandler(event:FlexEvent): void
      {
        _host = new KezdetAIRHost( File.documentsDirectory.nativePath + "/jar" );
        _host.addEventListener( KezdetEvent.UPDATE, onKezdetEvent );
        
        var pluginId : int  = _host.load( "KezdetTestDex.jar", "com.deviceteam.kezdet.plugin.KezdetPlugin" );
        var ret : String = _host.invoke( pluginId, "batteryLevel", null );
        trace(ret);
      }
      
      
      protected function onKezdetEvent(event : KezdetEvent):void
      {
        trace("PluginId: " + event.pluginId + ", level: " + event.message + ", code: " + event.param );
      }
      
    ]]>
    
  </fx:Script>
  
  <s:VGroup x="0" y="0" width="100%" height="100%">
    <s:VGroup width="100%" height="100%">
      <s:VGroup width="100%" height="100%">
      </s:VGroup>
    </s:VGroup>
  </s:VGroup>
</s:Application>
